def init_google_accounts_database(db_connection_func):
    """
    Initialize Google accounts database table

    Args:
        db_connection_func: Function that returns database connection
    """
    conn = db_connection_func()
    cursor = conn.cursor()

    # Create google_accounts table
    cursor.execute(
        'CREATE TABLE IF NOT EXISTS google_accounts ('
        'id TEXT PRIMARY KEY,'
        'user_id TEXT NOT NULL,'
        'account_email TEXT UNIQUE NOT NULL,'
        'friendly_name TEXT,'
        'trips_today INTEGER DEFAULT 0,'
        'last_trip_time TIMESTAMP,'
        'last_reset_date TEXT,'
        'created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP'
        ')'
    )

    # Create indexes
    cursor.execute('CREATE INDEX IF NOT EXISTS idx_google_accounts_user ON google_accounts(user_id)')
    cursor.execute('CREATE INDEX IF NOT EXISTS idx_google_accounts_email ON google_accounts(account_email)')

    conn.commit()
    conn.close()

    logger.info("Google accounts database initialized")
